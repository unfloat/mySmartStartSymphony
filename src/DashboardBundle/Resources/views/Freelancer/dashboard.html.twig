{% extends "Dashboard/Freelancer/dashboard_layout.html.twig" %}


{% block content %}
    <!-- Employer Headline -->
    <div class="dashboard-headline">
        <h3>Howdy, {{ freelancer.username }}!</h3>
        <span>We are glad to see you again!</span>

        <!-- Breadcrumbs -->
        <nav id="breadcrumbs" class="dark">
            <ul>
                <li><a href="#">Home</a></li>
                <li>Dashboard</li>
            </ul>
        </nav>
    </div>

    <!-- Fun Facts Container -->
    <div class="fun-facts-container">
        <div class="fun-fact" data-fun-fact-color="#36bd78">
            <div class="fun-fact-text">
                <span>Task Bids Won</span>
                <h4>22</h4>
            </div>
            <div class="fun-fact-icon"><i class="icon-material-outline-gavel"></i></div>
        </div>
        <div class="fun-fact" data-fun-fact-color="#b81b7f">
            <div class="fun-fact-text">
                <span>Jobs Applied</span>
                <h4>4</h4>
            </div>
            <div class="fun-fact-icon"><i class="icon-material-outline-business-center"></i></div>
        </div>
        <div class="fun-fact" data-fun-fact-color="#efa80f">
            <div class="fun-fact-text">
                <span>Reviews</span>
                <h4>{{ nombreReviews }}</h4>
            </div>
            <div class="fun-fact-icon"><i class="icon-material-outline-rate-review"></i></div>
        </div>
        <!-- Last one has to be hidden below 1600px, sorry :( -->
        <div class="fun-fact" data-fun-fact-color="#2a41e6">
            <div class="fun-fact-text">
                <span>This Month Views</span>
                <h4>987</h4>
            </div>
            <div class="fun-fact-icon"><i class="icon-feather-trending-up"></i></div>
        </div>
    </div>

    <!-- Row -->
    <div class="row">

        <div class="col-xl-8">
            <!-- Employer Box -->
            <div class="dashboard-box main-box-in-row">
                <div class="headline">
                    <h3><i class="icon-feather-bar-chart-2"></i> Your Profile Views</h3>
                    <div class="sort-by">
                        <select class="selectpicker hide-tick">
                            <option>Last 6 Months</option>
                            <option>This Year</option>
                            <option>This Month</option>
                        </select>
                    </div>
                </div>
                <div class="content">
                    <!-- Chart -->
                    <div class="chart">
                        <canvas id="chart" width="100" height="45"></canvas>
                    </div>
                </div>
            </div>
            <!-- Employer Box / End -->
        </div>
        <div class="col-xl-4">

            <!-- Employer Box -->
            <!-- If you want adjust height of two boxes
                 add to the lower box 'main-box-in-row'
                 and 'child-box-in-row' to the higher box -->
            <div class="dashboard-box child-box-in-row">
                <div class="headline">
                    <h3><i class="icon-material-outline-note-add"></i> Notes</h3>
                </div>

                <div class="content with-padding">
                    <!-- Note -->
                    <div class="dashboard-note">
                        <p>Send payment to David Peterson</p>
                        <div class="note-footer">
                            <span class="note-priority medium">Medium Priority</span>
                            <div class="note-buttons">
                                <a href="#" title="Edit" data-tippy-placement="top"><i class="icon-feather-edit"></i></a>
                                <a href="#" title="Remove" data-tippy-placement="top"><i class="icon-feather-trash-2"></i></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="add-note-button">
                    <a href="#small-dialog" class="popup-with-zoom-anim button full-width button-sliding-icon">Add Note <i class="icon-material-outline-arrow-right-alt"></i></a>
                </div>
            </div>
            <!-- Employer Box / End -->


        </div>
        <!-- Employer Box -->
        <div class="col-xl-12">
            <div class="dashboard-box">
                {% if mgilet_notification_count(app.user) > 0 %}

                    <div class="headline">
                        <h3><i class="icon-material-baseline-notifications-none"></i>{{mgilet_notification_count (app.user)}} Notifications</h3>
                    </div>

                {% endif %}
                <div class="content">
                    <ul class="dashboard-box-list">
                        {{ mgilet_notification_render(app.user) }}

                    </ul>
                </div>

            </div>
        </div>
    </div>

    <!-- OUR MODAL ADD NOTE -->
    <div id="small-dialog" class="zoom-anim-dialog mfp-hide dialog-with-tabs">
        <!--Tabs -->
        <div class="sign-in-form">

            <ul class="popup-tabs-nav">
                <li><a href="#tab">Add Note</a></li>
            </ul>

            <div class="popup-tabs-container">

                <!-- Tab -->
                <div class="popup-tab-content" id="tab">

                    <!-- Welcome Text -->
                    <div class="welcome-text">
                        <h3>Do Not Forget ðŸ˜Ž</h3>
                    </div>

                    <!-- Form -->
                    <form method="post" id="add-note">

                        <select class="selectpicker with-border default margin-bottom-20" data-size="7" title="Priority" id="priority-textarea">
                            <option value="low">Low Priority</option>
                            <option value="medium">Medium Priority</option>
                            <option value="high">High Priority</option>
                        </select>

                        <textarea name="textarea" id="note-textarea" cols="10" placeholder="Note" class="with-border"></textarea>
                        <div id="notif" class="notification notice closeable">
                            <p id="message">All Fields Are Required.</p>
                        </div>

                    </form>
                    <!-- Button -->
                    <button class="button full-width button-sliding-icon ripple-effect" type="submit"  id="saveNote" form="add-note">Add Note <i class="icon-material-outline-arrow-right-alt"></i></button>

                </div>

            </div>
        </div>
    </div>
    <!-- PORTFOLIO MANAGEMENT BOX -->
    <div class="col-xl-16">
        <!-- Portfolio Box -->
        <div class="dashboard-box main-box-in-row">
            <div class="headline">
                <h3><i class="icon-feather-bar-chart-2"></i> Your Portfolio Management</h3>

            </div>
            <div class="content">
                <!-- Chart -->
                <!-- Accordion -->
                <div class="accordion js-accordion col-xl-auto">
                    <div class="submit-field">
                        <h5>Accordion</h5>
                    </div>

                    <!-- Accordion Item -->
                    <div class="accordion__item js-accordion-item">
                        <div class="accordion-header js-accordion-header"> ABOUT ME </div>

                        <!-- Accordtion Body -->
                        <div class="accordion-body js-accordion-body" style="display: none;">

                            <!-- Accordion Content -->
                            <div class="accordion-body__contents">
                                {{ portfolio.description }}
                            </div>

                        </div>
                        <!-- Accordion Body / End -->
                    </div>
                    <!-- Accordion Item / End -->

                    <!-- Accordion Item -->
                    <div class="accordion__item js-accordion-item">
                        <div class="accordion-header js-accordion-header">EXPERIENCE AND SKILLS</div>

                        <!-- Accordtion Body -->
                        <div class="accordion-body js-accordion-body" style="display: none;">


                            <!-- Sub Accordion Container -->
                            <div class="accordion js-accordion">

                                <!-- Sub Accordion -->
                                <div class="accordion__item js-accordion-item">
                                    <div class="accordion-header js-accordion-header">PREVIOUS EXPERIENCES</div>
                                    <div class="accordion-body js-accordion-body" style="display: none;">
                                        <div class="accordion-body__contents">
                                            {{ portfolio.previousExperiences }}
                                        </div>
                                    </div>
                                </div>

                                <!-- Sub Accordion -->
                                <div class="accordion__item js-accordion-item">
                                    <div class="accordion-header js-accordion-header">MY SKILLS LIST</div>
                                    <div class="accordion-body js-accordion-body">
                                        <div class="accordion-body__contents">
                                            {{ portfolio.skills }}
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- Sub Accordion / End -->
                        </div>
                        <!-- Accordion Body / End -->
                    </div>
                    <!-- Accordion Item / End -->



                </div>
                <!-- Accordion / End -->



                <div class="col-xl-12">
                    <div class="submit-field">
                        <h5>Attachments</h5>

                        <!-- Attachments -->
                        <div class="attachments-container margin-top-0 margin-bottom-0">
                            <div class="attachment-box ripple-effect">
                                <span>{{ portfolio.devisName }}</span>
                            </div>

                        </div>
                        <a href="{{ path("edit_portfolio",{'id':portfolio.id})}}" class="button big dark ripple-effect">EDIT</a>
                        <div class="clearfix"></div>








                    </div>
                </div>



            </div>
        </div>
    </div>


    {% block scripts %}
        <script type="javascript">
            $(document).ready(function(){
                $("#saveNote").on("click", function(event){
                    let note=$('#note-textarea');
                    let priority=$('#priority-textarea');
                    let message=$('#message');
                    let notif=$('#notif');

                    event.preventDefault();
                    $.ajax({
                        url:'{{ path('new_note') }}',
                        dataType:"json",
                        data:{"note":note.val(),"priority":priority.val()},

                        success: function(response) {
                            if (response.validate === false) {
                                message.text(response.message);
                                notif.addClass("error").removeClass("notice");

                            }else
                            {
                                message.text(response.message);
                                notif.addClass("success").removeClass("error").removeClass("notice");
                                window.location.href = response.redirect;
                            }
                        },



                        error: function (err) {

                        }

                    });
                });
            });
        </script>



    {% endblock %}


{% endblock %}

